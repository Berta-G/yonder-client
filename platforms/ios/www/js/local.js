// Generated by CoffeeScript 1.7.1
var fillBucket, getBucket, onDeviceReady, onLoad;

angular.module('scupr', ['ionic']);

onLoad = function() {
  return document.addEventListener("deviceready", onDeviceReady, false);
};

onDeviceReady = function() {
  return getBucket();
};

getBucket = function() {
  return $.get("http://localhost:3000/ads", function(data) {
    return fillBucket(data);
  });
};

fillBucket = function(data) {
  var source, template;
  console.log(data);
  source = $("#bucket-template").html();
  console.log(source);
  template = Handlebars.compile(source);
  console.log(template);
  return $('#bucket').html(template(data));
};

Handlebars.registerHelper('createBucket', function(ads) {
  var ad, column, i, out, _i, _len;
  console.log(ads);
  out = "";
  for (i = _i = 0, _len = ads.length; _i < _len; i = ++_i) {
    ad = ads[i];
    console.log(ad);
    console.log(i);
    column = "<div class=\"col card\">\n	<a href=\"#\">\n		<div class=\"item item-image\">\n			<img src= \"http://localhost:3000" + ad.bucket_image + "\"/>\n		</div>\n	</a>\n</div>";
    if (i % 4 === 0) {
      out = out + ("<div class='row'>" + column);
    }
    if (i % 4 === 1 || i % 4 === 2) {
      out = out + column;
    }
    if (i % 4 === 3) {
      out = out + ("" + column + "</div>");
    }
  }
  return new Handlebars.SafeString(out);
});
